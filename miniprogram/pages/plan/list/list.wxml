<!--pages/plan/list/list.wxml-->
<view class="container">
  <!-- 学习计划列表 -->
  <view class="plan-list">
    <view class="plan-item card" 
          wx:for="{{plans}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="goToPlanDetail">
      <view class="plan-header">
        <text class="plan-title">{{item.title}}</text>
        <text class="plan-status status-{{item.status}}">
          {{item.status === 'ACTIVE' ? '进行中' : item.status === 'COMPLETED' ? '已完成' : '已暂停'}}
        </text>
      </view>

      <text class="plan-desc">{{item.description}}</text>

      <view class="plan-info">
        <text class="info-item">目标院校：{{item.targetUniversity || '未设置'}}</text>
        <text class="info-item">目标专业：{{item.targetMajor || '未设置'}}</text>
        <text class="info-item">考试日期：{{item.examDate || '未设置'}}</text>
      </view>

      <view class="plan-progress">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{item.progress || 0}}%"></view>
        </view>
        <text class="progress-text">{{item.progress || 0}}%</text>
      </view>

      <view class="plan-footer">
        <text class="plan-time">创建于 {{item.createTime}}</text>
        <view class="plan-actions">
          <button class="btn-view" data-id="{{item.id}}" catchtap="goToPlanDetail">查看详情</button>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty" wx:if="{{!loading && plans.length === 0}}">
    <image class="empty-image" src="/images/empty.png"></image>
    <text class="empty-text">还没有学习计划</text>
    <button class="btn-create btn-primary" bindtap="createPlan">创建计划</button>
  </view>

  <!-- 加载状态 -->
  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>

  <!-- 创建计划按钮 -->
  <view class="float-btn" wx:if="{{plans.length > 0}}" bindtap="createPlan">
    <text>+</text>
  </view>
</view>
